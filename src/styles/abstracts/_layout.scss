/*
  ========================================
  $Layout
  ========================================
*/

:root {
  --screen: 1024px;
  --s-sm: clamp(0.5rem, calc(0.318rem + 0.909vw), 1rem);
  --s-base: clamp(1rem, calc(0.636rem + 1.818vw), 2rem);
  --s-md: clamp(1.5rem, calc(1.318rem + 0.909vw), 2rem);
  --s-lg: clamp(1.5rem, calc(0.955rem + 2.727vw), 3rem);
  --s-xl: clamp(2rem, calc(1.273rem + 3.636vw), 4rem);
  --s-xxl: clamp(3rem, calc(1.909rem + 5.455vw), 6rem);
}

/* $Global
   ==================================== */

html,
body {
  overflow-x: hidden;
  height: 100%;
}

body {
  min-width: 300px;
  display: grid;
  grid-template-rows: auto 1fr auto;
  position: relative;
  overscroll-behavior: none;
  margin: 0;
}

/* Set display: none on line reaks used as spacing
   prevent CMS users from using extra line breaks for spacing */
br + br {
  display: none;
}

.layout--center {
  --outset: 0 auto;
  width: var(--screen);
}

.layout--full {
  --inset: 0;
}

header,
main,
section,
article,
aside,
footer {
  /*
  --inset: var(--s-xl);
  --outset: var(--s-md);
  */

  box-sizing: border-box;
  padding: var(--inset);
  margin: var(--outset);
}

/* $Breakpoints
   ==================================== */

@mixin bp($point) {
  @if $point == large {
    @media screen and (width > 1024px) {
      @content;
    }
  } @else if $point == medium {
    @media screen and (width >= 720px) {
      @content;
    }
  } @else if $point == small/medium {
    @media screen and (768px <= width <= 1024px) {
      @content;
    }
  }
}

// @use "../../styles/abstracts/index.scss" as a;
// @include a.bp(medium) {}

// add containers bp

/* $Flex
   ==================================== */

// OK
%flex-main {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--gap);
  @include bp(medium) {
    justify-content: var(--justify);
  }
}

%flex-auto {
  //--gap: var(--s-sm);
  --basis: 320px;
  display: flex;
  flex-wrap: wrap;
  //justify-content: center;
  //align-items: center;
  gap: var(--gap);
  @include bp(medium) {
    justify-content: var(--justify);
  }
  > :where(*) {
    flex: 1 1 var(--basis);
  }
}

%flex {
  @include bp(large) {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: var(--gap);
  }
}
// .section_footer {@extend %flex;}

/* $Grid
   ==================================== */

%grid-cols {
  /*   --cols: 2;
  --rows: auto; */
  @include bp(large) {
    display: grid;
    gap: var(--gap);
    grid-template-columns: repeat(var(--cols), 1fr);
    grid-template-rows: repeat(var(--rows), 1fr);
  }
}

// OK
%grid-auto {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(auto-fit, minmax(min(var(--basis), 100%), 1fr));
  > :where(*) {
    max-height: var(--basis);
  }
}

// OK
.card-container {
  --basis: 400px;
  @extend %grid-auto;
}

.grid-75 {
  display: grid;
  gap: var(--gap);
  grid-template-columns: 75% 25%; // 3fr 1fr
}

// to test for a card with img

.media {
  display: grid;
  gap: var(--gap);
  grid-template-columns: fit-content(200px) 1fr;
  grid-template-rows: 1fr auto;
  grid-template-areas:
    "image content"
    "image footer";
  margin-bottom: 4em;
}

.grid-2c {
  --cols: 2;
  --rows: 2;
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(var(--cols), 1fr);
  grid-template-rows: repeat(var(--rows), 1fr);

  &__item-l {
    grid-area: 1 / 1 / 3 / 2; // rs / cs / re / ce
    place-self: auto;
  }
  &__item-t {
    grid-area: 1 / 2 / 2 / 3;
  }
  &__item-b {
    grid-area: 2 / 2 / 3 / 3;
  }
}

.grid-auto-fit {
  --grid-min-col-size: 400px;
  --grid-flow-spacing: 2rem;
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(
    auto-fit,
    minmax(min(var(--grid-min-col-size), 100%), 1fr)
  );
  gap: var(--grid-flow-spacing), 1rem;
}

.container {
  container: container-grid / inline-size;
}

.grid-3 {
  display: grid;
  gap: var(--gap);

  @container container-grid (width > calc(170px * 3)) {
    grid-template-columns: repeat(3, 1fr);
  }
}

.calendar {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(7, 1fr);
  > :where(div) {
    justify-self: stretch;
  }
}

/* $Card
   ==================================== */

// 3 cols
.flex-auto {
  --gap: var(--s-sm);
  --basis: 320px;
  display: flex;
  flex-wrap: wrap;
  gap: var(--gap);
  > :where(*) {
    flex: 1 1 var(--basis);
  }
}

.flex--50 {
  display: flex;
  flex-wrap: wrap;
  gap: var(--gap);
  max-height: 400px;
  > :where(div) {
    flex: 1 1 50%;
    min-width: 320px;
    max-width: 50%;
    overflow: hidden;
  }
}

/* $Helpers
   ==================================== */

%grid--centered {
  display: grid;
  place-content: center;
}

%flex--centered {
  display: flex;
  align-items: center;
  justify-content: center;
}

%flex--between {
  display: flex;
  justify-content: space-between;
  gap: var(--gap);
}

%flex--self {
  margin-left: auto;
}
